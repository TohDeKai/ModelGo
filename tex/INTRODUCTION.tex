\section{Introduction}
% 人工智能基础设施的快速发展和产品化大大加速了机器学习组件数量的增长，模型的复用，如finetune和moe变得常见
Over the past decade, the advancement and productization of AI infrastructures have significantly accelerated the proliferation of machine learning (ML) components~\cite{jiang2023empirical}, including AI models~\cite{rombach2022high, touvron2023llama}, software~\cite{wolf2020transformers, he2022fastermoe}, and big datasets~\cite{gao2020the, schuhmann2022laion}.
Concurrently, the reuse of these components has gained popularity, motivated by concerns about their significant demands on financial and energy resources~\cite{strubell2019energy}, as well as the widespread recognition of the value advocated by the open-source movement~\cite{rosen2005open}.
Unlike code reuse in the OSS field, the reuse of AI models follow a distinct schema.
A frequently employed approach for AI models reuse is fine-tuning Pre-Trained Models (PTMs)~\cite{han2021pre, touvron2023llama}, where PTMs are adapted on a domain-specific dataset, leveraging their robust generalization capabilities. 

% 但是由于xxx原因导致software，data，model都有不同的license，存在潜在的冲突和法律风险。
From a legal perspective, model reuse is generally uncontroversial when its developers or affiliated companies own the copyright for all components.
However, data and models often have separate copyright holders in nowadays ML projects~\cite{rajbahadur2021can, radford2019language, scao2022bloom, zeng2023glm}.
For instance, GPT-2~\cite{radford2019language}, developed by OpenAI, was trained on 45 million web pages containing content from third-party platforms like WordPress, GitHub, and IMDb, none of which is owned by OpenAI.
These crowdsourced content typically provides limited usage and distribution rights to users through pre-agreed licenses (e.g., Creative Commons Licenses\footnote{https://creativecommons.org/licenses/}), which may restrict certain reuse methods like remixing, reproducing, and translating. 
To prevent legal risk, it is essential to ensure that the final ML projects remain compaliant with all license conditions associated with the reused components~\cite{cui2023empirical, mathur2012empirical, kapitsaki2017automating}.

However, compared to assessing licensing compliance for OSS, ensuring license compliance in ML projects poses several unique challenges. 
First, a ML project is not only a combination of software like an OSS project but also composed of datasets and models~\cite{han2021pre}, which may be under different types of licenses (e.g., Free Content Licenses and AI model licenses~\cite{contractor2022behavioral}).
Second, ML components often follow more complicated coupling paradigms and nested workflows. For instance, Openjourney\footnote{https://openjourney.art/} is an image generation model derived from StableDiffusion~\cite{rombach2022high}, and fine-tuned on images generated by another commercial product, Midjourney\footnote{https://www.midjourney.com/}.
This demonstrates that knowledge can be transferred between models without explicit code integration~\cite{you2021workshop}.
Another challenge is improper and ambiguity licensing in ML projects.
For example, GPT-2 and BERT~\cite{devlin2019bert} are regarded as part of software and then licensed as OSS (e.g., MIT and Apache-2.0).
However, ML projects like StableDiffusion and Llama2~\cite{touvron2023llama} tend to apply responsible AI restriction terms for both model and code, using AI model licenses such as OpenRAIL-M~\cite{contractor2022behavioral} and Llama2 Community License\footnote{https://huggingface.co/meta-llama/Llama-2-7b}.
Additionally, to circumvent the limitations of standard OSS licenses, some licensors adopt non-commercial content licenses or custom licenses to protect the Intellectual Property (IP) of their models by prohibiting commercial use~\cite{huang2022layoutlmv3}, fine-tuning~\cite{dreamlike2023}, and reverse engineering~\cite{goyal2022vision}.
Such ambiguity and the diverse licensing practices within ML projects  increase significant legal uncertainty in license compliance analysis.
As a result, traditional OSS license analysis approaches~\cite{ombredanne2020free, mathur2012empirical} only consider inclusion and linking relationships among software and lack support for AI model licenses, making them unsuitable for ML project license analysis.

In this paper, we introduce Modelgo, a tool designed to analyze potential license conflicts, improper license choices, use restrictions and obligations in ML projects that involve nested component reuse procedures.
To demonstrate the usefulness of Modelgo, we present 5 use cases constructed using 15 datasets and 11 models from real-world, whose license types cover OSS, free content, and AI model.
Our findings show that there exist potential legal risks when reusing  components under copyleft or non-commercial licenses, and point out the need for attention to AI model licenses.
The main contributions of our paper are:
\begin{itemize}
    \item We raise the challenge of license analysis for ML projects and propose Modelgo to assessing it. To the best of our knowledge, our work is the first attempt to deal with this challenge in the ML context.
    \item As part of our work, we introduce a new taxonomy based on the forms of reused components to identify the corresponding conditions for various ML reuse mechanisms. This method helps mitigate ambiguity in cases of mismatch between applied license type and actual component type, allowing Modelgo to analyze components under various license types, including OSS, free content and AI models.
    \item  We provide legal compliance assessment reports based on 5 use cases to showcase the effectiveness of our approach. 
    Through our use cases, we offer valuable insights and experiences in achieving legal compliance in ML projects. 
    Additionally, we also provide license choosing recommendations to minize the risk of non-compliance.
\end{itemize}

The rest of the paper is organized as follows. (TBD)
%We first propose using a new taxonomy based on the forms of reused components to identify the corresponding conditions for different reuse mechanisms.
%Based on Modelgo employs a tree structure to track the dependencies of components in ML pipelines.

% A Large-scale Dataset of (Open Source) License Text Variant, 有很多license为other
% An Empirical Study of License Conflict in Free and Open Source Software
% Open Source License Inconsistencies on GitHub
% An empirical study of license violations in open source projects
% Do Software Developers Understand Open Source Licenses?
% Analyzing Open Source License Compatibility Issues with Carneades

\begin{comment}
There is no consensus on whether the use of copyright works as input to train an AI system is an exercise of an exclusive right.
There remains significant legal uncertainty about whether copyright applies to AI training, which means it may not always be clear whether a CC license applies.
The larger model was trained on 256 cloud TPU v3 cores. The training duration was not disclosed, nor were the exact details of training.

Open source software license compliance~\cite{ombredanne2020free}

The open source definition~\cite{perens1999open}

AFL~\cite{rosen2005open}

Wudao2.0 1.75T MoE
[FASTMOE: A FAST MIXTURE-OF-EXPERT TRAINING SYSTEM]
[GLM-130B: AN OPEN BILINGUAL PRE-TRAINED MODEL]

Objectives and challenges associated with analyzing dataset license compliance?
Getty Images (US), Inc. v. Stability AI, Inc. (1:23-cv-00135)
Andersen et al v. Stability AI Ltd. et al (3:23-cv-00201)
We are not aware of any copyright restrictions of the material

C4, Pile Common Crawl
crowdsourced

COCO (CC-BY 4.0), CIFAR10 -> Flickr
Unsplash License \textit{Custom}: Compiling photos from Unsplash to replicate a similar or competing service. https://unsplash.com/license
Pixabay License: Data mining, extraction, scraping and the use of programs or robots for automatic data collection and/or extraction of digital data on the Services and/or the content available therein is strictly prohibited for all purposes, including without limitation for machine learning purposes.

Google Street View (SVHN) https://about.google/brand-resource-center/products-and-services/geo-guidelines/

%实际上，license analysis应该可分为四层，最底层是license 是否 compliance (或者叫做dataset provenance extraction, License identification)，例如数据集的license是否可以覆盖每个sample，还有就是distribution的版本的license和official source的license不一致，第二层是license之间是否conflict，第三层是应用所需的rights是否具备，最顶层是应用场景是否符合法律法规（regulation）


Software reuse is very simple from the legal point of view, if a company or an
individual reuses software for which it has copyrights. However, things change dramatically
if one wants to reuse software made by others, since software is protected
by copyright and possibly by patents. Without explicit permission, no person other
than the copyright holder is allowed to copy, distribute, or make derivative works
from the original work.
\end{comment}

\begin{table*}[]
    \caption{Summary of machine learning projects in Huggingface. }
    \footnotesize
    \label{tab:MLP}
    \begin{tabular}{|p{2.1cm}|p{1.6cm}|p{2cm}|p{2.75cm}|p{3cm}|p{1.7cm}|p{2cm}|}
        \hline
        \textbf{ML Project} & \textbf{Task} & \textbf{Data License} & \textbf{Software License} & \textbf{Model License} & \textbf{Dataset} & \textbf{Risk Resource} \\ \hline
        
        Stable Diffusion v1-5 & Text to Image & CC-BY-4.0 & CreativeML-OpenRAIL-M & CreativeML-OpenRAIL-M & LAION-5B & Common Crawl \\ \hline
        
        BLOOM & Text Generation & \textit{Mixture} & \textit{Unknown} & BigScience-BLOOM-RAIL-1.0 & \textit{Crowdsourced} & Common Crawl, \newline Wikipedia, etc. \\ \hline

        OrangeMixs & Text to Image & \textit{Mixture} & \textit{Unknown} & CreativeML-OpenRAIL-M & \textit{Crowdsourced} & Danbooru \\ \hline

        ControlNet & Text to Image &  \textit{Unknown} & Apache-2.0 & OpenRAIL & \textit{Unknown} & n/a \\ \hline

        Openjourney & Text to Image &  CC-BY-NC-4.0 & \textit{Unknown} & CreativeML-OpenRAIL-M & Midjourney Gen & Midjourney Gen \\ \hline

        ChatGLM-6B & Text Generation &  \textit{Mixture} & Apache-2.0 & \textit{Custom} & the Pile, Wudao, \newline \textit{Crowdsourced} & PubMed,  Wikipedia, \newline arXiv, GitHub, etc. \\ \hline

        Llama2 & Text Generation &  \textit{Unknown} & Llama2 Community License & Llama2 Community License & \textit{Unknown} & n/a \\ \hline

        StarCoder & Text Generation &  \textit{Mixture} & Apache-2.0 & BigCode-OpenRAIL-M & The Stack & none \\ \hline

        Falcon-40B & Text Generation & ODC-By & Apache-2.0 & Apache-2.0 & RefinedWeb & Wikipedia, Reddit, \newline StackOverflow, etc. \\ \hline

        Waifu Diffusion & Text to Image & \textit{Mixture} & \textit{Unknown} & CreativeML-OpenRAIL-M & \textit{Unknown} & n/a \\ \hline

        Dolly-v2-12B & Text Generation & CC-BY-SA-3.0\&4.0 & MIT & MIT & databricks-dolly\newline-15k, the Pile & PubMed,  Wikipedia, \newline arXiv, GitHub, etc. \\ \hline

        Dreamlike Photoreal & Text to Image & \textit{Unknown} & \textit{Unknown} & \textit{Modified} CreativeML-\newline OpenRAIL-M & \textit{Unknown} & n/a \\ \hline

        Counterfeit & Text to Image & \textit{Unknow} & \textit{Unknown} & CreativeML-OpenRAIL-M & \textit{Unknown} & n/a \\ \hline

        GPT-2 & Text Generation & \textit{Mixture} & \textit{Modified} MIT & \textit{Modified} MIT & \textit{Crowdsourced} & WordPress, GitHub, \newline wikiHow, IMDb, etc. \\ \hline

        GPT-J-6B & Text Generation & \textit{Mixture} & Apache-2.0 & Apache-2.0 & the Pile & PubMed,  Wikipedia, \newline arXiv, GitHub, etc. \\ \hline

        LLaMA-7B & Text Generation & \textit{Mixture} & \textit{Custom} & \textit{Custom} & \textit{Crowdsourced} & GitHub, arXiv, etc. \\ \hline

        BERT & Fill Mask & \textit{Mixture} & Apache-2.0 & Apache-2.0 & Book Corpus, \newline Wikipedia (en) & Wikipedia (en) \\ \hline

        Whisper & ASR & \textit{Unknown} & MIT & MIT & \textit{Unknown} & n/a \\ \hline

        MPT & Text Generation & \textit{Mixture} & Apache-2.0 & Apache-2.0 & \textit{Crowdsourced} & Common Crawl, \newline Wikipedia, etc. \\ \hline
    
    % <TOTAL>
    % Data License: All Permissive(2); Risk of Copyleft/Proprietary(11); Custom/Modified(0); Unknown(6);
    % Software License: Permissive(11); Risk of Copyleft/Proprietary(n/a); Custom/Modified(2); Unknown(6);
    % Model License: Permissive(15); Risk of Copyleft/Proprietary(n/a); Custom/Modified(4); Unknown(0);

    \end{tabular}
\end{table*}